(this["webpackJsonpcoronavirus-game-react"]=this["webpackJsonpcoronavirus-game-react"]||[]).push([[0],{18:function(e,t,a){e.exports={wrapper:"ModalGameOver_wrapper__3O8rr",wrapperPoints:"ModalGameOver_wrapperPoints__27hwd",title:"ModalGameOver_title__1yMxF",text:"ModalGameOver_text__1zGXq",points:"ModalGameOver_points__1mH6S",bonusPoints:"ModalGameOver_bonusPoints__3eRhj",buttons:"ModalGameOver_buttons__38fgF",button:"ModalGameOver_button__2CpMe",show:"ModalGameOver_show__-mwWY",animation:"ModalGameOver_animation__ZGN6t",icon:"ModalGameOver_icon__v1ebu",wrapperRecord:"ModalGameOver_wrapperRecord__1yUCO",bonusTimeWrapper:"ModalGameOver_bonusTimeWrapper__tjmyZ",bonusTimeWrapperAnim:"ModalGameOver_bonusTimeWrapperAnim__3PPyJ"}},1815:function(e,t,a){},1816:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),s=a(216),o=a.n(s),r=(a(732),a(22)),c=a(131),l=a(7),h=a.n(l),u=a(348),d=a.n(u);var p=n.a.memo((function(e){var t=e.children,a=e.className,i=e.variant,s=Object(c.a)(e,["children","className","variant"]);return(n.a.createElement("button",Object.assign({className:h()(a,d.a.button,d.a[i])},s),t))})),m=a(93),f=a.n(m);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var y=n.a.createElement("g",{fill:"none",fillRule:"evenodd"},n.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),n.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),b=function(e){var t=e.svgRef,a=e.title,i=g(e,["svgRef","title"]);return n.a.createElement("svg",v({width:24,height:24,viewBox:"0 0 24 24",ref:t},i),a?n.a.createElement("title",null,a):null,y)},w=n.a.forwardRef((function(e,t){return n.a.createElement(b,v({svgRef:t},e))})),_=(a.p,a(39)),E=a(42),T=new(function(){function e(){Object(_.a)(this,e);var t=localStorage.getItem("history");this.history=t?JSON.parse(t):[]}return Object(E.a)(e,[{key:"setNewPuntation",value:function(e){var t={points:e,date:Date.now()};if(!this.history.length)return this.history.push(t),this.saveInLocalStorage(),!0;var a=this.history.findIndex((function(t){return e>t.points}));return a>-1?this.history.splice(a,0,t):this.history.push(t),this.history.length>10&&this.history.pop(),this.saveInLocalStorage(),0===a}},{key:"saveInLocalStorage",value:function(){localStorage.setItem("history",JSON.stringify(this.history))}},{key:"getBestScore",value:function(){return this.history[0]}}]),e}()),O=a(684),D=a(685),I=a.n(D),S=1,C=2,k=3,N=4,P=5,R=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=R;var A=function(e){var t=e.onStateChange,a=e.state,n=e.metadata,s=e.styles,o=e.classPrefix,c=Object(i.useRef)(),l=Object(i.useState)(a||S),h=Object(r.a)(l,2),u=h[0],d=h[1];Object(i.useEffect)((function(){d(a||S)}),[a]);var p=Object(i.useCallback)((function(e){return R((function(){return function(e){if(c.current===e.target){var a=function(e){return C===e?(d(k),k):N===e?(d(P),P):void 0}(u);t&&t({event:e,state:a,metadata:n})}}(e)}))}),[u,t,n]);Object(i.useEffect)((function(){c.current.addEventListener("animationend",p);var e=c.current;return function(){return e.removeEventListener("animationend",p)}}),[c,p]);var m=Object(i.useCallback)((function(){return s&&B({state:a,styles:s,classPrefix:o})}),[a,s,o])();return[c,m,u]},B=function(e){var t=e.state,a=e.styles,i=e.classPrefix;if(a){var n=i;switch(n||(n="spark-animation"),t){case S:return a["".concat(n,"--waiting-to-enter")];case C:return a["".concat(n,"--entering")];case k:return a["".concat(n,"--entered")];case N:return a["".concat(n,"--leaving")];case P:return a["".concat(n,"--left")];default:return n}}else console.error("[mapStateWithClassCSSModule] you should pass an css module styles object")},x=a(349),M=a.n(x);var j=n.a.memo((function(e){var t=e.className,a=e.state,s=e.onStateChange,o=e.children,c=A({state:a,styles:M.a,classPrefix:"modal"}),l=Object(r.a)(c,3),u=l[0],d=l[1],p=l[2];return Object(i.useEffect)((function(){s&&s(p)}),[p,s]),n.a.createElement("div",{ref:u,className:h()(t,M.a.modal,d)},o)}));function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var W=n.a.createElement("g",{fill:"none",fillRule:"evenodd"},n.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),n.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M10.79 16.29c.39.39 1.02.39 1.41 0l3.59-3.59c.39-.39.39-1.02 0-1.41L12.2 7.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L12.67 11H4c-.55 0-1 .45-1 1s.45 1 1 1h8.67l-1.88 1.88c-.39.39-.38 1.03 0 1.41zM19 3H5c-1.11 0-2 .9-2 2v3c0 .55.45 1 1 1s1-.45 1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),U=function(e){var t=e.svgRef,a=e.title,i=L(e,["svgRef","title"]);return n.a.createElement("svg",V({width:24,height:24,viewBox:"0 0 24 24",ref:t},i),a?n.a.createElement("title",null,a):null,W)},G=n.a.forwardRef((function(e,t){return n.a.createElement(U,V({svgRef:t},e))}));a.p;function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var z=n.a.createElement("g",{fill:"none",fillRule:"evenodd"},n.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),n.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),X=function(e){var t=e.svgRef,a=e.title,i=H(e,["svgRef","title"]);return n.a.createElement("svg",F({width:24,height:24,viewBox:"0 0 24 24",ref:t},i),a?n.a.createElement("title",null,a):null,z)},J=n.a.forwardRef((function(e,t){return n.a.createElement(X,F({svgRef:t},e))})),K=(a.p,a(18)),Y=a.n(K);var q=n.a.memo((function(e){var t=e.state,a=e.newBest,s=e.points,o=e.bonusTime,l=e.onAccept,u=e.onCancel,d=Object(c.a)(e,["state","newBest","points","bonusTime","onAccept","onCancel"]),m=Object(i.useRef)(),f=Object(i.useRef)(),v=Object(i.useState)(!1),g=Object(r.a)(v,2),y=g[0],b=g[1],w=Object(i.useState)(!1),_=Object(r.a)(w,2),E=_[0],D=_[1],S=Object(i.useState)(!1),C=Object(r.a)(S,2),k=C[0],N=C[1],P=Object(i.useState)(!1),R=Object(r.a)(P,2),A=R[0],B=R[1],x=Object(i.useState)(!1),M=Object(r.a)(x,2),V=M[0],L=M[1],W=T.getBestScore();W=W&&W.points||0;var U=Object(O.useCountUp)({end:o,delay:3.5,duration:2}).countUp;return Object(i.useEffect)((function(){setTimeout((function(){b(!0),N(!0)}),1500),a?(f.current=I.a.loadAnimation({container:m.current,renderer:"svg",loop:!1,autoplay:!1,path:"".concat("/coronavirus-game-react","/assets/confentiAnim.json")}),setTimeout((function(){b(!0),N(!1),setTimeout((function(){f.current.goToAndPlay(0),D(!0)}),100),setTimeout((function(){L(!0)}),2e3)}),6500)):setTimeout((function(){N(!1),L(!0),setTimeout((function(){B(!0)}),100)}),6500)}),[]),n.a.createElement(j,Object.assign({state:t},d),n.a.createElement("div",{className:Y.a.wrapper},n.a.createElement("h1",{className:Y.a.title},"\xa1SE ACAB\xd3!"),n.a.createElement("div",{className:Y.a.wrapperPoints},n.a.createElement("div",{className:Y.a.wrapperRecord},n.a.createElement("p",{className:Y.a.text},"Puntuaci\xf3n"),n.a.createElement("p",{className:Y.a.points},s+Number(U)," pts")),n.a.createElement("div",{className:h()(Y.a.bonusTimeWrapper,y&&Y.a.show)},n.a.createElement("div",{className:h()(Y.a.bonusTimeWrapperAnim,k&&Y.a.show)},n.a.createElement("p",{className:Y.a.text},"Bonus de tiempo"),n.a.createElement("p",{className:Y.a.bonusPoints},"+ ",o-Number(U))),n.a.createElement("div",{className:h()(Y.a.bonusTimeWrapperAnim,A&&Y.a.show)},n.a.createElement("p",{className:Y.a.text},"Tu mejor puntuaci\xf3n"),n.a.createElement("p",{className:Y.a.bonusPoints},W)),n.a.createElement("div",{className:h()(Y.a.bonusTimeWrapperAnim,E&&Y.a.show)},n.a.createElement("p",{className:Y.a.bonusPoints},"\xa1NUEVO RECORD!")))),n.a.createElement("div",{className:h()(Y.a.buttons,V&&Y.a.show)},n.a.createElement(p,{className:Y.a.button,variant:"primary",onClick:function(){l&&l()}},n.a.createElement(J,{className:Y.a.icon}),"REINTENTAR"),n.a.createElement(p,{className:Y.a.button,variant:"negative",onClick:function(){u&&u()}},n.a.createElement(G,{className:Y.a.icon}),"SALIR")),n.a.createElement("div",{className:Y.a.animation,ref:m})))}));function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},s=Object.keys(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var $=n.a.createElement("g",{fill:"none",fillRule:"evenodd"},n.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),n.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),ee=function(e){var t=e.svgRef,a=e.title,i=Q(e,["svgRef","title"]);return n.a.createElement("svg",Z({width:24,height:24,viewBox:"0 0 24 24",ref:t},i),a?n.a.createElement("title",null,a):null,$)},te=n.a.forwardRef((function(e,t){return n.a.createElement(ee,Z({svgRef:t},e))})),ae=(a.p,a(46)),ie=a.n(ae);var ne=n.a.memo((function(e){var t=e.state,a=e.onAccept,s=e.onCancel,o=Object(c.a)(e,["state","onAccept","onCancel"]),l=Object(i.useState)(0),u=Object(r.a)(l,2),d=u[0],m=u[1];Object(i.useEffect)((function(){var e=function(){m(window.orientation)};return window.addEventListener("orientationchange",e,!1),function(){window.removeEventListener("orientationchange",e,!1)}}),[]);var f=90===d||-90===d;return n.a.createElement(j,Object.assign({state:t},o),n.a.createElement("div",{className:ie.a.wrapper},n.a.createElement("div",{className:ie.a.wrapperPoints},n.a.createElement("div",{className:ie.a.wrapperRecord},f?n.a.createElement("p",{className:ie.a.title},"Perfecto, ya puedes comenzar"):n.a.createElement("p",{className:ie.a.title},"\xdasame en horizantal"))),n.a.createElement("div",{className:h()(ie.a.buttons,ie.a.show)},n.a.createElement(p,{className:h()(ie.a.button,!f&&ie.a.hide),variant:"primary",onClick:function(){a&&a()}},n.a.createElement(te,{className:ie.a.icon}),"JUGAR"),n.a.createElement(p,{className:ie.a.button,variant:"negative",onClick:function(){s&&s()}},"CANCELAR"))))}));var se=n.a.memo((function(e){var t=e.setScreenActive,a=T.getBestScore();return a=a&&a.points||0,n.a.createElement("div",{className:f.a.home},n.a.createElement("div",{className:f.a.wrapper},n.a.createElement("h1",{className:f.a.coronaTime},"CORONA-TIME"),n.a.createElement("div",{className:f.a.bestPoints},n.a.createElement("p",null,"MEJOR PUNTUACI\xd3N"),n.a.createElement("h2",null,a," pts")),n.a.createElement(p,{className:f.a.button,variant:"primary",onClick:function(){t(Ue.game)}},n.a.createElement(w,{className:f.a.icon}),"JUGAR AHORA"),n.a.createElement(p,{className:f.a.button,onClick:function(){return alert("Esto est\xe1 WIP, ;)")}},"\xbfC\xd3MO FUNCIONA?")))})),oe=a(134),re=a(109),ce=new(function(){function e(){var t=this;Object(_.a)(this,e),this.EVENTS={ballInfected:1,ballRecovered:2,ballRecoveredByPlayer:3,playerInfected:4,resetBallsByWave:5},this.data={},this.totals={length:0,infected:0,recovered:0},this.length=0,this.setTotals=function(e){t.totals=Object(re.a)({},t.totals,{length:e})},this.onChangeCallbacks=[]}return Object(E.a)(e,[{key:"initGame",value:function(e){this.length=e,this.resetAll(),this.setTotals(e)}},{key:"set",value:function(e){var t=e.event,a=e.gameTime;if(Object.values(this.EVENTS).some((function(e){return e===t}))){switch(t){case this.EVENTS.ballInfected:this.totals.infected+=1;break;case this.EVENTS.ballRecovered:case this.EVENTS.ballRecoveredByPlayer:this.totals.recovered+=1,this.totals.infected-=1;break;case this.EVENTS.playerInfected:this.totals.infected+=1}this.data[Date.now()]=Object(re.a)({gameTime:a,event:t},this.totals),this._notifyChangeData(this.data)}else console.error("Collect Data event passed in set not deffined")}},{key:"resetWaveData",value:function(e){var t=e.gameTime;this.totals.infected=0,this.totals.recovered=this.totals.length,this.data[Date.now()]=Object(re.a)({gameTime:t,event:this.EVENTS.resetBallsByWave},this.totals),this._notifyChangeData(this.data)}},{key:"resetAll",value:function(){this.data={},this.totals={length:this.length,infected:0,recovered:0}}},{key:"getData",value:function(){return this.data}},{key:"getEventsConst",value:function(){return this.EVENTS}},{key:"onChangeData",value:function(e){this.onChangeCallbacks.some((function(t){return t===e}))||this.onChangeCallbacks.push(e)}},{key:"offChangeData",value:function(e){var t=this.onChangeCallbacks.indexOf(e);-1!==t&&this.onChangeCallbacks.splice(t,1)}},{key:"_notifyChangeData",value:function(e){this.onChangeCallbacks.forEach((function(t){return t(e)}))}}]),e}());n.a.memo((function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),a=t[0],s=t[1];return Object(i.useEffect)((function(){ce.onChangeData((function(e){var t=function(e){var t=[];return Object.values(e).forEach((function(e){var a=t.length-1;a>-1&&t[a].gameTime===e.gameTime?(t.pop(),t.push(e)):t.push(e)})),t}(e);s(t)}))}),[]),n.a.createElement(oe.c,null,n.a.createElement(oe.b,{height:250,data:a},n.a.createElement(oe.d,{name:"time",dataKey:"gameTime",type:"number",domain:[0,40],allowDecimals:!1}),n.a.createElement(oe.e,{domain:[0,40]}),n.a.createElement(oe.a,{type:"monotone",dataKey:"infected",stackId:"1",stroke:"#8884d8",fill:"#8884d8",isAnimationActive:!1})))}));var le,he=a(697),ue=a(696),de=1,pe=2,me=[],fe=function e(t,a){var i=this,n=Phaser.Math.Between(t,a);le=this.time.addEvent({delay:n,callback:function(){ve.bind(i)(),e.bind(i)(t,a)},callbackScope:this,loop:!1})},ve=function(){var e=[],t=this.ownVars.player,a=t.hasRespirator(),i=t.hasMask(),n=me.some((function(e){return e.id===de})),s=me.some((function(e){return e.id===pe}));if(a||n||e.push(de),i||s||e.push(pe),e.length)switch(e[Phaser.Math.Between(0,e.length-1)]){case de:return void ye.bind(this)();case pe:return void ge.bind(this)()}},ge=function(){var e=this.ownVars.player,t=Phaser.Math.Between(0,this.game.config.width-34),a=Phaser.Math.Between(0,this.game.config.height-34-176),i=this.physics.add.image(t,a,"item_mask");i.setDisplaySize(34,34),me.push({gameObject:i,id:pe}),this.physics.add.overlap(e.get(),i,(function(t,a){var i=t.getData("player");t.setData("player",Object(re.a)({},i,{mask:!0})),e.setMask({active:!0}),e.updateTexture(t),a.destroy(),me=me.filter((function(e){return e.id!==pe}))}))},ye=function(){var e=this.ownVars.player,t=Phaser.Math.Between(0,this.game.config.width-34),a=Phaser.Math.Between(0,this.game.config.height-34-176),i=this.physics.add.image(t,a,"item_respirator");i.setDisplaySize(34,34),me.push({gameObject:i,id:de}),this.physics.add.overlap(e.get(),i,(function(t,a){var i=t.getData("player");t.setData("player",Object(re.a)({},i,{respirator:!0})),e.setRespirator({active:!0}),e.updateTexture(t),a.destroy(),me=me.filter((function(e){return e.id!==de}))}))},be=function e(){var t=this,a=this.ownVars.player,i=Phaser.Math.Between(0,this.game.config.width-34),n=Phaser.Math.Between(0,this.game.config.height-34-176),s=["item_dog","item_shop"],o=Phaser.Math.Between(0,s.length-1),r=this.physics.add.image(i,n,s[o]);r.setDisplaySize(34,34),this.physics.add.overlap(a.get(),r,(function(a,i){t.ownVars.wavesManager.sumPoints(),i.destroy(),e.bind(t)()}))},we=a(352),_e=a.n(we),Ee=function(e,t,a){var i=this;a.getGroup().getChildren().forEach((function(a,n){e>n&&(a.setVelocity(0),a.setImmovable(!0),t&&t>0&&i.time.addEvent({delay:5e3,callback:function(){var e=_e.a.Math.Between(0,1);a.setVelocity(e?-1*i.ownVars.velocity:i.ownVars.velocity),a.setImmovable(!1)},callbackScope:i,loop:!1}))}))},Te=function(e,t){var a=this,i=this.game.config.width-200,n=_e.a.Math.Between(200,i),s=this.game.config.height/2,o=this.add.rectangle(0,0,4,s,3355443),r=this.add.rectangle(0,0,4,s,3355443);this.physics.add.existing(o),this.physics.add.existing(r),o.x=n,o.y=-1*s,o.body.velocity.x=0,o.body.velocity.y=100,o.body.bounce.x=1,o.body.bounce.y=1,r.x=n,r.y=s+this.game.config.height,r.body.velocity.x=0,r.body.velocity.y=-100,r.body.bounce.x=1,r.body.bounce.y=1,o.body.setImmovable(!0),r.body.setImmovable(!0);var c=this.physics.add.collider(o,r,(function(e,t){o.body.setVelocity(0),r.body.setVelocity(0),a.physics.world.removeCollider(c)})),l=[];l.push(this.physics.add.collider(o,this.ownVars.player.get(),(function(e,t){a.ownVars.player.setDefaultVelocity()}))),l.push(this.physics.add.collider(r,this.ownVars.player.get(),(function(e,t){a.ownVars.player.setDefaultVelocity()}))),l.push(this.physics.add.collider(o,t.getGroup(),(function(e,a){t.setDefaultVelocity(a)}))),l.push(this.physics.add.collider(r,t.getGroup(),(function(e,a){t.setDefaultVelocity(a)}))),this.time.addEvent({delay:1e4,callback:function(){o.body.velocity.y=-100,r.body.velocity.y=100,a.time.addEvent({delay:1e4,callback:function(){c&&a.physics.world.removeCollider(c),l.forEach((function(e){return a.physics.world.removeCollider(e)})),e&&e()}})},callbackScope:this,loop:!1})},Oe=function(){var e=this.ownVars.time;this.ownVars.timeText=this.add.text(12,12),this.ownVars.timeText.setStyle({fontFamily:"FiraMono-Bold",fontSize:"24px",fill:"#333333",align:"right"}),this.ownVars.timeText.setText("".concat(e,"s")),this.ownVars.timeText.setAlpha(.9)},De=function e(){var t=this,a=this.ownVars,i=a.player,n=a.time,s=a.timeText;s&&s.setText("".concat(n,"s")),this.time.addEvent({delay:1e3,callback:function(){if(!i||i.get().active){var a=n+1;t.ownVars.time=a,e.bind(t)()}},callbackScope:this,loop:!1})},Ie=function(e){return!e.sys.game.device.os.desktop},Se=(Phaser.GameObjects.Text,function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_.a)(this,e),this.phaserButtons=[],this.phaserPassiveImages={},this.BUTTON_WIDTH=48,this.PASSIVE_WIDTH=32,this.getActionableButtonsWidth=function(){var e=t.actionableButtons.length;return e*t.BUTTON_WIDTH+24*e+12},this.addActionableButtons=function(){var e=t.scene.game.config;t.actionableButtons.forEach((function(a,i){var n=t.scene.add.dom(e.width-36-i*(24+t.BUTTON_WIDTH),e.height-44,a.getDOMButton());t.phaserButtons.push(n)}))},this.addPassivePowerUps=function(){var e=t.passivePowerUps,a=t.scene.game.config,i={x:a.width-(t.getActionableButtonsWidth()+16+t.PASSIVE_WIDTH),y:a.height-44};e.forEach((function(e,a){var n=t.scene.add.image(i.x-a*(t.PASSIVE_WIDTH+16),i.y,"".concat(e,"_disabled"));n.setDisplaySize(t.PASSIVE_WIDTH,t.PASSIVE_WIDTH),t.phaserPassiveImages[e]=n}))},this.drawSceneSeparator=function(){var e=t.scene.game.config;t.scene.add.rectangle(e.width/2,e.height-88,e.width,1,"0xeeeeee")},this.drawSeparator=function(){var e=t.getActionableButtonsWidth(),a=t.scene.game.config;t.scene.add.rectangle(a.width-e,a.height-44,1,88,"0xeeeeee")},this.setPassivePowerUp=function(e){var a=e.active,i=e.powerUp;if(!t.phaserPassiveImages[i])return console.error("Invalid power up provided");t.phaserPassiveImages[i].setTexture("".concat(i).concat(a?"":"_disabled"))},this.scene=a.scene,this.actionableButtons=a.actionableButtons||[],this.passivePowerUps=a.passivePowerUps||[],this.addActionableButtons(),this.addPassivePowerUps(),this.drawSceneSeparator(),this.passivePowerUps.length>0&&this.drawSeparator()}),Ce=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_.a)(this,e),this.powerUpButton=null,this.callback=null,this.createButton=function(){if(t.powerUpButtonHTML=document.createElement("button"),t.powerUpButtonHTML.classList.add("power-up"),t.powerUpButtonHTML.addEventListener("click",(function(){t.handleClick()})),t.powerUpCountdown=document.createElement("span"),t.powerUpCountdown.classList.add("power-up-countdown"),t.powerUpButtonHTML.appendChild(t.powerUpCountdown),t.icon){var e=document.createElement("img");e.src="".concat("/coronavirus-game-react","/assets/ico-").concat(t.icon,".png"),t.powerUpButtonHTML.appendChild(e)}if(t.shortcut){var a=document.createElement("span");a.classList.add("power-up-shortcut"),a.textContent=t.shortcut,t.powerUpButtonHTML.appendChild(a)}},this.handleClick=function(){t.callback&&t.callback()},this.getDOMButton=function(){return t.powerUpButtonHTML},this.setDisabled=function(e){var a=e.disabled,i=void 0!==a&&a;t.powerUpButtonHTML.disabled=i},this.updateCountdown=function(e){var a=e.timeLeft;t.powerUpCountdown.textContent="".concat(a,"s")},this.callback=a.cb,this.shortcut=a.shortcut||"",this.icon=a.icon||"",this.createButton()},ke=new(function(){function e(){Object(_.a)(this,e),this.DIRECTIONS={up:1,upRight:2,right:3,downRight:4,down:5,downLeft:6,left:7,upLeft:8}}return Object(E.a)(e,[{key:"getDirections",value:function(){return this.DIRECTIONS}},{key:"inferNewDirection",value:function(e){if(e&&e.body){var t=e.body.velocity,a=t.x,i=t.y,n=i>0,s=a>0,o=a<0;return i<0?s?this.DIRECTIONS.upRight:o?this.DIRECTIONS.upLeft:this.DIRECTIONS.up:n?s?this.DIRECTIONS.downRight:o?this.DIRECTIONS.downLeft:this.DIRECTIONS.down:s?this.DIRECTIONS.right:o?this.DIRECTIONS.left:void 0}}},{key:"setAnimationByDirection",value:function(e){switch(this.inferNewDirection(e)){case this.DIRECTIONS.up:return void e.setAngle(180);case this.DIRECTIONS.upRight:return void e.setAngle(-135);case this.DIRECTIONS.right:return void e.setAngle(-90);case this.DIRECTIONS.downRight:return void e.setAngle(-45);case this.DIRECTIONS.down:return void e.setAngle(0);case this.DIRECTIONS.downLeft:return void e.setAngle(45);case this.DIRECTIONS.left:return void e.setAngle(90);case this.DIRECTIONS.upLeft:return void e.setAngle(135)}}}]),e}()),Ne=function(){function e(t){var a=t.scene;Object(_.a)(this,e),this.NEXT_ITEM_MIN_TIME=2e3,this.NEXT_ITEM_MAX_TIME=15e3,this.NEXT_WALL_MIN_TIME=15e3,this.NEXT_WALL_MAX_TIME=45e3,this.wave=1,this.points=0,this.onWaveChangeCb=[],this.scene=a}return Object(E.a)(e,[{key:"initText",value:function(){this.waveText=this.scene.add.text(0,12),this.waveText.setStyle({fontFamily:"FiraMono-Medium",fontSize:"24px",fill:"#333333",align:"center",fixedWidth:this.scene.game.config.width}),this.updateWaveText(),this.pointsText=this.scene.add.text(0,12),this.pointsText.setStyle({fontFamily:"FiraMono-Bold",fontSize:"24px",fill:"#333333",align:"right",fixedWidth:this.scene.game.config.width-12}),this.updatePointsText()}},{key:"sumPoints",value:function(){this.points=this.points+(20+5*this.wave),this.updatePointsText()}},{key:"getPoints",value:function(){return this.points}},{key:"shouldTheWaveIncrement",value:function(e){var t=e.getGroup().getChildren();t.every((function(e){return!e.getData("infected")}))&&(this.wave+=1,e.uninfectAll(),e.infectABall({ball:t[0]}),this.incrementGameVelocity(),this.updateWaveText(),this.notifyWaveChange({wave:this.wave}))}},{key:"incrementGameVelocity",value:function(){var e=this.scene.ownVars.timeScaleDisable,t=this.scene.physics.world;!e&&t.timeScale>=.3&&(t.timeScale-=.02)}},{key:"updateWaveText",value:function(){this.waveText&&this.waveText.setText("OLEADA ".concat(this.wave))}},{key:"updatePointsText",value:function(){this.pointsText&&this.pointsText.setText("".concat(this.points,"pts"))}},{key:"timerNextItem",value:function(){fe.bind(this.scene)(this.NEXT_ITEM_MIN_TIME,this.NEXT_ITEM_MAX_TIME)}},{key:"timerNextWall",value:function(){var e=this;this.timerNextWallInstance&&this.timerNextWallInstance.remove();var t=Phaser.Math.Between(this.NEXT_WALL_MIN_TIME,this.NEXT_WALL_MAX_TIME);this.timerNextWallInstance=this.scene.time.addEvent({delay:t,callback:function(){Te.bind(e.scene)((function(){return e.timerNextWall()}),e.scene.ownVars.balls)},callbackScope:this,loop:!1})}},{key:"onWaveChange",value:function(e){this.onWaveChangeCb.some((function(t){return e===t}))||this.onWaveChangeCb.push(e)}},{key:"offWaveChange",value:function(e){if(e){var t=this.onWaveChangeCb.indexOf((function(t){return e===t}));this.onWaveChangeCb.splice(t,1)}}},{key:"notifyWaveChange",value:function(e){this.onWaveChangeCb.forEach((function(t){return t(e)}))}}]),e}(),Pe=function(){function e(t){Object(_.a)(this,e),this.BORDER_WIDTH=10,this.scene=t,this.borderUp=this.scene.physics.add.image(this.scene.game.config.width/2,0),this.borderUp.setSize(this.scene.game.config.width,this.BORDER_WIDTH,!0),this.borderUp.setImmovable(!0),this.borderDown=this.scene.physics.add.image(this.scene.game.config.width/2,this.scene.game.config.height),this.borderDown.setSize(this.scene.game.config.width,176,!0),this.borderDown.setImmovable(!0),this.borderRight=this.scene.physics.add.image(this.scene.game.config.width,this.scene.game.config.height/2),this.borderRight.setSize(this.BORDER_WIDTH,this.scene.game.config.height,!0),this.borderRight.setImmovable(!0),this.borderLeft=this.scene.physics.add.image(0,this.scene.game.config.height/2),this.borderLeft.setSize(this.BORDER_WIDTH,this.scene.game.config.height,!0),this.borderLeft.setImmovable(!0),this.bordersGroup=new Phaser.GameObjects.Group(this,[this.borderUp,this.borderDown,this.borderRight,this.borderLeft])}return Object(E.a)(e,[{key:"getGroup",value:function(){return this.bordersGroup}},{key:"getBorders",value:function(){return{up:this.borderUp,down:this.borderDown,left:this.borderLeft,right:this.borderRight}}},{key:"collideWith",value:function(e,t){var a=this;e.forEach((function(e){a.scene.physics.add.collider(a.bordersGroup,e,t)}))}}]),e}(),Re=function(){function e(t,a,i){var n=this;Object(_.a)(this,e),this.directions=ke,this.SOCIAL_DISTANCING_TIMER=10,this.SPRINT_INCREMENT=2.5,this.SPRINT_TIME_DISABLED=5,this.SOCIAL_DISTANCE_TIME_DISABLED=10,this.prevCursorInput=0,this.prevTimeInput=0,this.TIME_DOUBLE_INPUT=500,this.CURSORS_INPUT_CODE={top:1,right:2,down:3,left:4},this.fastDoubleInput=function(e,t){if(e!==n.prevCursorInput)return n.prevTimeInput=t,!1;var a=t-n.prevTimeInput;return n.prevTimeInput=t,a<=n.TIME_DOUBLE_INPUT?(n.sprint(),!0):void 0},this.sprintEnable=!1,this.sprintUIDisabled=!1,this.sprint=function(){n.sprintUIDisabled||(n.sprintEnable=!0,n.sprintUIDisabled=!0,n.setNewVelocity(n.velocity*n.SPRINT_INCREMENT),n.scene.time.addEvent({delay:250,callback:function(){n.sprintEnable=!1,n.setNewVelocity(n.velocity)},callbackScope:n,loop:!1}),n.sprintButton.setDisabled({disabled:!0}),n.runCountDownSprint({onEnd:function(){n.sprintUIDisabled=!1,n.sprintButton.setDisabled({disabled:!1}),n.countDownSprint=1e3*n.SPRINT_TIME_DISABLED}}))},this.countDownSprint=1e3*this.SPRINT_TIME_DISABLED,this.disbledSocialDistancing=!1,this.socialDistance=function(){n.disbledSocialDistancing||(n.disbledSocialDistancing=!0,Ee.bind(n.scene)(n.SOCIAL_DISTANCING_LENGTH,n.SOCIAL_DISTANCING_TIMER,n.balls),n.socialDistancingButton.setDisabled({disabled:!0}))},this.countDownSocialDistance=1e3*this.SOCIAL_DISTANCE_TIME_DISABLED,this.scene=t,this.velocity=a,this.SOCIAL_DISTANCING_LENGTH=Math.round(.7*i),this.player=this.initSprite(),this.player.setVelocity(0,a),this.player.setSize(60,60,!0),this.player.setDisplaySize(24,24),this.player.setCollideWorldBounds(!0),this.player.setBounce(1),this.sprintButton=new Ce({shortcut:"R",icon:"sprint",cb:this.sprint}),this.socialDistancingButton=new Ce({shortcut:"Q",icon:"confination",cb:this.socialDistance}),this.powerUps=new Se({scene:this.scene,actionableButtons:[this.sprintButton,this.socialDistancingButton],passivePowerUps:["powerup_medikit","powerup_mask"]}),this.scene.ownVars.wavesManager.onWaveChange((function(){n.disbledSocialDistancing=!1,n.socialDistancingButton.setDisabled({disabled:!1})}))}return Object(E.a)(e,[{key:"initSprite",value:function(){return this.player=this.scene.physics.add.sprite(this.scene.game.config.width/2-20,this.scene.game.config.height/2-20,"player"),this.player}},{key:"get",value:function(){return this.player}},{key:"checkIfVelocityIsZeroAndUpdate",value:function(e){var t=this.player.body.velocity,a=t.x,i=t.y;0===a&&0===i&&(e.up?this.player.setVelocityY(-1*this.velocity):e.right?this.player.setVelocityX(-1*this.velocity):e.down?this.player.setVelocityY(this.velocity):e.left&&this.player.setVelocityX(this.velocity))}},{key:"collideWithBall",value:function(e,t){var a=this;this.balls=e,this.scene.physics.add.collider(this.player,e.getGroup(),(function(i,n){var s=i.getData("player")||{},o=a.scene.ownVars.time;if(n.getData("infected"))if(s.respirator)e.recoverABall({ball:n,byPlayer:!0}),s.respirator=!1,i.setData("player",s),a.updateTexture(i);else if(s.mask)s.mask=!1,i.setData("player",s),a.updateTexture(i);else{var r=ce.getEventsConst().playerInfected;ce.set({event:r,gameTime:o}),i.destroy(),t()}else s.respirator&&(s.respirator=!1,i.setData("player",s),a.updateTexture(i));i&&i.body&&i.body.touching&&a.checkIfVelocityIsZeroAndUpdate(i.body.touching),a.directions.setAnimationByDirection(i),a.directions.setAnimationByDirection(n)}))}},{key:"inputLeft",value:function(e){this.player.setVelocityY(0),this.player.setVelocityX(-1*this.velocity),this.directions.setAnimationByDirection(this.player),this.fastDoubleInput(this.CURSORS_INPUT_CODE.left,e),this.prevCursorInput=this.CURSORS_INPUT_CODE.left}},{key:"inputRight",value:function(e){this.player.setVelocityY(0),this.player.setVelocityX(this.velocity),this.directions.setAnimationByDirection(this.right),this.fastDoubleInput(this.CURSORS_INPUT_CODE.right,e),this.prevCursorInput=this.CURSORS_INPUT_CODE.right}},{key:"inputUp",value:function(e){this.player.setVelocityX(0),this.player.setVelocityY(-1*this.velocity),this.directions.setAnimationByDirection(this.player),this.fastDoubleInput(this.CURSORS_INPUT_CODE.up,e),this.prevCursorInput=this.CURSORS_INPUT_CODE.up}},{key:"inputDown",value:function(e){this.player.setVelocityX(0),this.player.setVelocityY(this.velocity),this.directions.setAnimationByDirection(this.player),this.fastDoubleInput(this.CURSORS_INPUT_CODE.down,e),this.prevCursorInput=this.CURSORS_INPUT_CODE.down}},{key:"inputs",value:function(e,t){this.player.active&&(Phaser.Input.Keyboard.JustDown(e.left)?this.inputLeft(t):Phaser.Input.Keyboard.JustDown(e.right)&&this.inputRight(t),Phaser.Input.Keyboard.JustDown(e.up)?this.inputUp(t):Phaser.Input.Keyboard.JustDown(e.down)&&this.inputDown(t))}},{key:"inputsSwipe",value:function(e,t){this.player.active&&(e.left?this.inputLeft(t):e.right?this.inputRight(t):e.up?this.inputUp(t):e.down&&this.inputDown(t))}},{key:"inputKeysActions",value:function(){var e=this;this.scene.input.keyboard.on("keydown-Q",this.socialDistancingButton.handleClick),this.scene.input.keyboard.on("keydown-R",this.sprintButton.handleClick),this.scene.input.keyboard.on("keydown-W",(function(t){e.wallEnabled&&(e.wallEnabled=!1,quarentineWallAction.bind(e.scene)((function(){return e.wallEnabled=!0}),e.balls))}))}},{key:"updateTexture",value:function(e){var t=e.getData("player");this.powerUps.setPassivePowerUp({active:t.mask,powerUp:"powerup_mask"}),this.powerUps.setPassivePowerUp({active:t.respirator,powerUp:"powerup_medikit"}),t.mask&&t.respirator?e.setTexture("player_mask_respirator"):t.mask?e.setTexture("player_mask"):t.respirator?e.setTexture("player_respirator"):e.setTexture("player")}},{key:"setAnimationByDirection",value:function(){this.directions.setAnimationByDirection(this.player)}},{key:"setNewVelocity",value:function(e){var t=this.player.body.velocity,a=t.x,i=t.y,n=i>0,s=a>0,o=a<0;i<0?this.player.setVelocityY(-1*e):n&&this.player.setVelocityY(e),s?this.player.setVelocityX(e):o&&this.player.setVelocityX(-1*e)}},{key:"setDefaultVelocity",value:function(){this.sprintEnable?this.setNewVelocity(this.velocity*this.SPRINT_INCREMENT):this.setNewVelocity(this.velocity)}},{key:"runCountDownSprint",value:function(e){var t=this,a=e.onEnd;0!==this.countDownSprint?(this.sprintButton.updateCountdown({timeLeft:this.countDownSprint/1e3}),this.countDownSprint-=1e3,this.scene.time.addEvent({delay:1e3,callback:function(){t.runCountDownSprint({onEnd:a})},callbackScope:this,loop:!1})):a&&a()}},{key:"runCountDownSocialDistance",value:function(e){var t=this,a=e.onEnd;0!==this.countDownSocialDistance?(this.socialDistancingButton.updateCountdown({timeLeft:this.countDownSocialDistance/1e3}),this.countDownSocialDistance-=1e3,this.scene.time.addEvent({delay:1e3,callback:function(){t.runCountDownSocialDistance({onEnd:a})},callbackScope:this,loop:!1})):a&&a()}},{key:"setRespirator",value:function(e){var t=e.active;this.powerUps.setPassivePowerUp({active:t,powerUp:"powerup_medikit"})}},{key:"hasRespirator",value:function(){var e=this.player.getData("player");return e&&e.respirator}},{key:"setMask",value:function(e){var t=e.active;this.powerUps.setPassivePowerUp({active:t,powerUp:"powerup_mask"})}},{key:"hasMask",value:function(){var e=this.player.getData("player")||{};return e&&e.mask}}]),e}(),Ae=function(){function e(t,a,i){var n=this;Object(_.a)(this,e),this.directions=ke,this.scene=t,this.velocity=a,this.balls=t.physics.add.group({key:"ball",frameQuantity:i,collideWorldBounds:!0,bounceX:1,bounceY:1,velocityX:a,velocityY:a});var s=this.balls.getChildren(),o=this.scene.add.rectangle(0,0,this.scene.game.config.width,this.scene.game.config.height-180);Phaser.Actions.RandomRectangle(s,o),s.forEach((function(e){e.setSize(60,60,!0),e.setDisplaySize(24,24),1===Phaser.Math.Between(0,1)&&e.setVelocity(-1*n.velocity),n.uninfectABall({ball:e,noSave:!0}),n.directions.setAnimationByDirection(e)})),this.infectABall({ball:s[s.length-1]}),this.ballCollideWithBall()}return Object(E.a)(e,[{key:"getGroup",value:function(){return this.balls}},{key:"infectABall",value:function(e){var t=this,a=e.ball,i=ce.getEventsConst();a.setData("infected",!0),a.setTexture("infected"),a.setTintFill("0xff656d");var n=this.scene.ownVars.time;ce.set({event:i.ballInfected,gameTime:n}),this.scene.time.addEvent({delay:1e4,callback:function(){a.getData("recovered")||t.recoverABall({ball:a})},callbackScope:this,loop:!1})}},{key:"uninfectABall",value:function(e){var t=e.ball,a=e.noSave,i=e.byPlayer;if(t.setData("infected",!1),t.setData("recovered",!1),t.setTintFill("0xd4d6dc"),!a){var n=ce.getEventsConst(),s=i&&n.ballRecoveredByPlayer||n.ballRecovered;ce.set({event:s,gameTime:this.scene.ownVars.time})}}},{key:"recoverABall",value:function(e){var t=e.ball,a=e.byPlayer;if(t.getData("infected")){t.setData("infected",!1),t.setData("recovered",!0),t.setTintFill("0x62dcb6"),this.scene.ownVars.wavesManager.shouldTheWaveIncrement(this);var i=ce.getEventsConst(),n=a&&i.ballRecoveredByPlayer||i.ballRecovered;ce.set({event:n,gameTime:this.scene.ownVars.time})}}},{key:"uninfectAll",value:function(){var e=this;this.balls.getChildren().forEach((function(t){e.uninfectABall({ball:t,noSave:!0})})),ce.resetWaveData({gameTime:this.scene.ownVars.time})}},{key:"ballCollideWithBall",value:function(){var e=this;this.scene.physics.add.collider(this.balls,this.balls,(function(t,a){!t.getData("infected")||a.getData("infected")||a.getData("recovered")?!a.getData("infected")||t.getData("infected")||t.getData("recovered")||e.infectABall({ball:t}):e.infectABall({ball:a}),e.directions.setAnimationByDirection(t),e.directions.setAnimationByDirection(a)}))}},{key:"setAnimationByDirection",value:function(e){this.directions.setAnimationByDirection(e)}},{key:"setDefaultVelocity",value:function(e){var t=e.body.velocity,a=t.x,i=t.y,n=i>0,s=a>0,o=a<0;i<0?e.setVelocityY(-1*this.velocity):n&&e.setVelocityY(this.velocity),s?e.setVelocityX(this.velocity):o&&e.setVelocityX(-1*this.velocity)}},{key:"stop",value:function(){this.balls.getChildren().forEach((function(e){e.setVelocity(0)}))}}]),e}(),Be=function(e,t,a,i,n,s,o){var r,c,l,h,u={type:Phaser.AUTO,width:o.width||1e3,height:o.height||600,backgroundColor:16448250,parent:e,dom:{createContainer:!0},physics:{default:"arcade",arcade:{checkCollision:{up:!0,down:!0,left:!0,right:!0},forceX:!1,fps:60,gravity:{x:0,y:0},height:600,isPaused:!1,maxEntries:16,overlapBias:4,tileBias:16,timeScale:1,useTree:!0,width:1e3,x:0,y:0}},scene:{preload:function(){Ie(this)&&(this.load.plugin("rexvirtualjoystickplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexvirtualjoystickplugin.min.js",!0),this.load.scenePlugin({key:"rexgesturesplugin",url:"https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexgesturesplugin.min.js",sceneKey:"rexGestures"}));this.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),this.load.image("ball","/coronavirus-game-react/assets/person.png"),this.load.image("infected","/coronavirus-game-react/assets/infected.png"),this.load.image("item_mask","/coronavirus-game-react/assets/ico-mask.png"),this.load.image("item_forced_quarentine","/coronavirus-game-react/assets/forced_quarentine.png"),this.load.image("item_social_distancing","/coronavirus-game-react/assets/social_distancing.png"),this.load.image("item_more_social_distancing","/coronavirus-game-react/assets/more_social_distancing.png"),this.load.image("item_respirator","/coronavirus-game-react/assets/ico-medikit.png"),this.load.image("item_dog","/coronavirus-game-react/assets/ico-dog.png"),this.load.image("item_shop","/coronavirus-game-react/assets/ico-shop.png"),this.load.image("solid_block","/coronavirus-game-react/assets/block.png"),this.load.image("player","/coronavirus-game-react/assets/player.png"),this.load.spritesheet("person","/coronavirus-game-react/assets/sprite_player_down.png",{frameWidth:256,frameHeight:256}),this.load.image("player_mask","/coronavirus-game-react/assets/player_mask.png"),this.load.image("player_respirator","/coronavirus-game-react/assets/player_respirator.png"),this.load.image("player_mask_respirator","/coronavirus-game-react/assets/player_mask_respirator.png"),this.load.spritesheet("player_down","/coronavirus-game-react/assets/sprite_player_down.png",{frameWidth:256,frameHeight:256}),this.load.image("powerup_mask","/coronavirus-game-react/assets/powerup-mask.png"),this.load.image("powerup_mask_disabled","/coronavirus-game-react/assets/powerup-mask-disabled.png"),this.load.image("powerup_medikit","/coronavirus-game-react/assets/powerup-medikit.png"),this.load.image("powerup_medikit_disabled","/coronavirus-game-react/assets/powerup-medikit-disabled.png")},create:function(){var e=this,t=new Ne({scene:this});this.ownVars={time:0,velocity:100,timeScaleDisable:n,wavesManager:t};var o=this;WebFont.load({custom:{families:["FiraMono-Bold","FiraMono-Medium"]},active:function(e){t.initText(),Oe.bind(o)()}}),ce.initGame(d+1),c=new Pe(this),i||(r=new Re(this,100,d),this.ownVars.player=r);var u=new Ae(this,100,d);this.ownVars.balls=u;i||(r.collideWithBall(u,(function(){me.forEach((function(e){e.gameObject.destroy()})),me=[],le&&le.remove(),u.stop(),s&&s({time:e.ownVars.time,points:t.getPoints()})})),c.collideWith([r.get()],(function(e,t){r.setAnimationByDirection()})));c.collideWith([u.getGroup()],(function(e,t){u.setAnimationByDirection(t)})),i||(Ie(this)?h=this.rexGestures.add.swipe({threshold:5,velocityThreshold:10,dir:"4dir"}):(l=this.input.keyboard.createCursorKeys(),r.inputKeysActions()),t.timerNextItem(),t.timerNextWall(),be.bind(this)());De.bind(this)(),a&&a>0&&Ee.bind(this)(a,0,u)},update:function(e){l&&!i&&r.inputs(l,e);h&&h.isSwiped&&r.inputsSwipe(h,e)}}},d=t;return new Phaser.Game(u)},xe=a(220),Me=a.n(xe),je=a(695),Ve=a.n(je),Le={width:900,height:600};var We=n.a.memo((function(e){var t=e.setScreenActive,a=Object(i.useRef)(),s=Object(i.useState)(!0),o=Object(r.a)(s,2),c=o[0],l=o[1],h=Object(i.useState)(),u=Object(r.a)(h,2),d=u[0],p=u[1],m=Object(i.useState)(!1),f=Object(r.a)(m,2),v=f[0],g=f[1],y=Object(i.useState)(!1),b=Object(r.a)(y,2),w=b[0],_=b[1],E=Object(i.useState)(0),O=Object(r.a)(E,2),D=O[0],I=O[1],S=Object(i.useState)(0),k=Object(r.a)(S,2),R=k[0],A=k[1],B=Object(i.useState)(!1),x=Object(r.a)(B,2),M=x[0],j=x[1],V=Object(i.useState)(Le),L=Object(r.a)(V,2),W=L[0],U=L[1],G=new Ve.a(navigator.userAgent),F=function(){p(N)};return Object(i.useEffect)((function(){if(!c){var e=G.mobile()?{width:window.innerWidth,height:window.innerHeight}:Le;U(e);var t=G.mobile()?10:35;return a.current=Be("coronavirusGame",t,0,!1,!1,(function(e){var t=e.time,a=e.points,i=Math.round(2.683*t);I(a),A(i);var n=T.setNewPuntation(i+a);j(n),p(C),g(!0)}),e),function(){a.current.destroy()}}}),[c]),Object(i.useEffect)((function(){!(window.innerWidth>window.innerHeight)&&G.mobile()?l(!0):l(!1)}),[]),c?n.a.createElement(ne,{state:C,onAccept:function(){l(!1)},onCancel:function(){t(Ue.home)}}):n.a.createElement("div",{className:Me.a.game},n.a.createElement("div",{style:{width:"".concat(W.width,"px"),height:"".concat(W.height,"px")},className:Me.a.wrapper},n.a.createElement("div",{id:"coronavirusGame"}),v&&n.a.createElement(q,{className:Me.a.modal,state:d,points:D,bonusTime:R,newBest:M,onAccept:function(){a.current.scene.getScenes(!0)[0].scene.restart(),F()},onCancel:function(){F(),_(!0)},onStateChange:function(e){switch(e){case P:return g(!1),void(w&&t(Ue.home))}}})))})),Ue=(a(1815),{home:1,game:2});var Ge=n.a.memo((function(){var e=Object(i.useState)(Ue.home),t=Object(r.a)(e,2),a=t[0],s={setScreenActive:t[1]};switch(a){case Ue.home:return n.a.createElement(se,s);case Ue.game:return n.a.createElement(We,s);default:return n.a.createElement(se,s)}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},220:function(e,t,a){e.exports={game:"Game_game__1oenb",wrapper:"Game_wrapper__2JG6h",chartWrapper:"Game_chartWrapper__2xDFN"}},348:function(e,t,a){e.exports={button:"Button_button__2cZ5P",primary:"Button_primary__1pAFz",negative:"Button_negative__nytKD"}},349:function(e,t,a){e.exports={modal:"Modal_modal__2J34Z","modal--waiting-to-enter":"Modal_modal--waiting-to-enter__3CFSj",enter:"Modal_enter__12j6C","modal--entering":"Modal_modal--entering__3hm3E",entering:"Modal_entering__tp7ZH","modal--entered":"Modal_modal--entered__1ii0l","modal--leaving":"Modal_modal--leaving__1uQDl",leaving:"Modal_leaving__VWOLZ","modal--left":"Modal_modal--left__2nfQf"}},46:function(e,t,a){e.exports={wrapper:"ModalPortraitToLandscape_wrapper__hDSIO",wrapperPoints:"ModalPortraitToLandscape_wrapperPoints__2FAZA",title:"ModalPortraitToLandscape_title__2FdjI",text:"ModalPortraitToLandscape_text__2sAq6",points:"ModalPortraitToLandscape_points__Dbonb",bonusPoints:"ModalPortraitToLandscape_bonusPoints__3KCu5",buttons:"ModalPortraitToLandscape_buttons__1e82Q",show:"ModalPortraitToLandscape_show___anfV",button:"ModalPortraitToLandscape_button__1pWVJ",hide:"ModalPortraitToLandscape_hide__vLuFX",animation:"ModalPortraitToLandscape_animation__2L4qG",icon:"ModalPortraitToLandscape_icon__2ZI3W",wrapperRecord:"ModalPortraitToLandscape_wrapperRecord__3oNXu",bonusTimeWrapper:"ModalPortraitToLandscape_bonusTimeWrapper__2LNtP",bonusTimeWrapperAnim:"ModalPortraitToLandscape_bonusTimeWrapperAnim__1HlSA"}},727:function(e,t,a){e.exports=a(1816)},732:function(e,t,a){},93:function(e,t,a){e.exports={home:"Home_home__3ydw8",wrapper:"Home_wrapper__22QFl",coronaTime:"Home_coronaTime__3FRKr",icon:"Home_icon___HGqo",button:"Home_button__3K5lt",bestPoints:"Home_bestPoints__1fIWt"}}},[[727,1,2]]]);
//# sourceMappingURL=main.139ef360.chunk.js.map