(this["webpackJsonpcoronavirus-game-react"]=this["webpackJsonpcoronavirus-game-react"]||[]).push([[0],{175:function(e,t,a){e.exports=a(364)},180:function(e,t,a){},19:function(e,t,a){e.exports={home:"Home_home__3ydw8",wrapper:"Home_wrapper__22QFl",coronaTime:"Home_coronaTime__3FRKr",icon:"Home_icon___HGqo",button:"Home_button__3K5lt",bestPoints:"Home_bestPoints__1fIWt"}},363:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(50),c=a.n(o),i=(a(180),a(7)),l=a(53),s=a(4),u=a.n(s),m=a(79),f=a.n(m);var v=r.a.memo((function(e){var t=e.children,a=e.className,n=e.variant,o=Object(l.a)(e,["children","className","variant"]);return(r.a.createElement("button",Object.assign({className:u()(a,f.a.button,f.a[n])},o),t))})),p=a(19),d=a.n(p);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _=r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),r.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),g=function(e){var t=e.svgRef,a=e.title,n=b(e,["svgRef","title"]);return r.a.createElement("svg",h({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,_)},O=r.a.forwardRef((function(e,t){return r.a.createElement(g,h({svgRef:t},e))})),E=(a.p,a(133)),y=a(134),w=new(function(){function e(){Object(E.a)(this,e);var t=localStorage.getItem("history");this.history=t?JSON.parse(t):[]}return Object(y.a)(e,[{key:"setNewPuntation",value:function(e){var t={points:e,date:Date.now()};if(!this.history.length)return this.history.push(t),this.saveInLocalStorage(),!0;var a=this.history.findIndex((function(t){return e>t.points}));return a>-1?this.history.splice(a,0,t):this.history.push(t),this.history.length>10&&this.history.pop(),this.saveInLocalStorage(),0===a}},{key:"saveInLocalStorage",value:function(){localStorage.setItem("history",JSON.stringify(this.history))}},{key:"getBestScore",value:function(){return this.history[0]}}]),e}()),j=a(135),N=1,S=2,M=3,R=4,P=5,x=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=x;var C=function(e){var t=e.onStateChange,a=e.state,r=e.metadata,o=e.styles,c=e.classPrefix,l=Object(n.useRef)(),s=Object(n.useState)(a||N),u=Object(i.a)(s,2),m=u[0],f=u[1];Object(n.useEffect)((function(){f(a||N)}),[a]);var v=Object(n.useCallback)((function(e){return x((function(){return function(e){if(l.current===e.target){var a=function(e){return S===e?(f(M),M):R===e?(f(P),P):void 0}(m);t&&t({event:e,state:a,metadata:r})}}(e)}))}),[m,t,r]);Object(n.useEffect)((function(){l.current.addEventListener("animationend",v);var e=l.current;return function(){return e.removeEventListener("animationend",v)}}),[l,v]);var p=Object(n.useCallback)((function(){return o&&A({state:a,styles:o,classPrefix:c})}),[a,o,c])();return[l,p,m]},A=function(e){var t=e.state,a=e.styles,n=e.classPrefix;if(a){var r=n;switch(r||(r="spark-animation"),t){case N:return a["".concat(r,"--waiting-to-enter")];case S:return a["".concat(r,"--entering")];case M:return a["".concat(r,"--entered")];case R:return a["".concat(r,"--leaving")];case P:return a["".concat(r,"--left")];default:return r}}else console.error("[mapStateWithClassCSSModule] you should pass an css module styles object")},F=a(80),G=a.n(F);var k=r.a.memo((function(e){var t=e.className,a=e.state,o=e.onStateChange,c=e.children,l=C({state:a,styles:G.a,classPrefix:"modal"}),s=Object(i.a)(l,3),m=s[0],f=s[1],v=s[2];return Object(n.useEffect)((function(){o&&o(v)}),[v,o]),r.a.createElement("div",{ref:m,className:u()(t,G.a.modal,f)},c)}));function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var B=r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),r.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M10.79 16.29c.39.39 1.02.39 1.41 0l3.59-3.59c.39-.39.39-1.02 0-1.41L12.2 7.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L12.67 11H4c-.55 0-1 .45-1 1s.45 1 1 1h8.67l-1.88 1.88c-.39.39-.38 1.03 0 1.41zM19 3H5c-1.11 0-2 .9-2 2v3c0 .55.45 1 1 1s1-.45 1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),H=function(e){var t=e.svgRef,a=e.title,n=T(e,["svgRef","title"]);return r.a.createElement("svg",I({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,B)},L=r.a.forwardRef((function(e,t){return r.a.createElement(H,I({svgRef:t},e))}));a.p;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var W=r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),r.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),q=function(e){var t=e.svgRef,a=e.title,n=J(e,["svgRef","title"]);return r.a.createElement("svg",z({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,W)},D=r.a.forwardRef((function(e,t){return r.a.createElement(q,z({svgRef:t},e))})),U=(a.p,a(9)),K=a.n(U),Z=a(136),Q=a.n(Z);var V=r.a.memo((function(e){var t=e.state,a=e.newBest,o=e.points,c=e.bonusTime,s=e.onAccept,u=e.onCancel,m=Object(l.a)(e,["state","newBest","points","bonusTime","onAccept","onCancel"]),f=Object(n.useRef)(),p=Object(n.useRef)(),d=Object(n.useState)(!1),h=Object(i.a)(d,2),b=h[0],_=h[1],g=Object(j.useCountUp)({end:c,delay:1,duration:5}).countUp;return Object(n.useEffect)((function(){a&&(p.current=Q.a.loadAnimation({container:f.current,renderer:"svg",loop:!1,autoplay:!1,path:"https://assets7.lottiefiles.com/packages/lf20_aEFaHc.json"}),setTimeout((function(){p.current.goToAndPlay(0),_(!0)}),4800))}),[]),r.a.createElement(k,Object.assign({state:t},m),r.a.createElement("div",{className:K.a.wrapper},r.a.createElement("h1",{className:K.a.title},"\xa1SE ACAB\xd3!"),r.a.createElement("div",{className:K.a.wrapperPoints},b?r.a.createElement("p",{className:K.a.text},"\xa1Nuevo record personal!"):r.a.createElement("p",{className:K.a.text},"Tu puntuaci\xf3n"),r.a.createElement("p",{className:K.a.points},o+Number(g)," pts"),r.a.createElement("p",{className:K.a.text},"Bonus de tiempo"),r.a.createElement("p",{className:K.a.bonusPoints},"+ ",c-Number(g))),r.a.createElement("div",{className:K.a.buttons},r.a.createElement(v,{className:K.a.button,variant:"primary",onClick:function(){s&&s()}},r.a.createElement(D,{className:K.a.icon}),"REINTENTAR"),r.a.createElement(v,{className:K.a.button,variant:"negative",onClick:function(){u&&u()}},r.a.createElement(L,{className:K.a.icon}),"SALIR")),r.a.createElement("div",{className:K.a.animation,ref:f})))}));var X=r.a.memo((function(e){var t=e.setScreenActive,a=w.getBestScore();return a=a&&a.points||0,r.a.createElement("div",{className:d.a.home},r.a.createElement("div",{className:d.a.wrapper},r.a.createElement("h1",{className:d.a.coronaTime},"CORONA-TIME"),r.a.createElement("div",{className:d.a.bestPoints},r.a.createElement("p",null,"MEJOR PUNTUACI\xd3N"),r.a.createElement("h2",null,a," pts")),r.a.createElement(v,{className:d.a.button,variant:"primary",onClick:function(){t(ne.game)}},r.a.createElement(O,{className:d.a.icon}),"JUGAR AHORA"),r.a.createElement(v,{className:d.a.button,onClick:function(){return alert("Esto est\xe1 WIP, ;)")}},"\xbfC\xd3MO FUNCIONA?")))})),$=a(33);r.a.memo((function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){globalCollectData.onChangeData((function(e){var t=function(e){var t=[];return Object.values(e).forEach((function(e){var a=t.length-1;a>-1&&t[a].gameTime===e.gameTime?(t.pop(),t.push(e)):t.push(e)})),t}(e);o(t)}))}),[]),r.a.createElement($.c,null,r.a.createElement($.b,{height:250,data:a},r.a.createElement($.d,{name:"time",dataKey:"gameTime",type:"number",domain:[0,40],allowDecimals:!1}),r.a.createElement($.e,{domain:[0,40]}),r.a.createElement($.a,{type:"monotone",dataKey:"infected",stackId:"1",stroke:"#8884d8",fill:"#8884d8",isAnimationActive:!1})))}));var Y=a(55),ee=a.n(Y),te={width:1e3,height:600};var ae=r.a.memo((function(e){var t=e.setScreenActive,a=Object(n.useRef)(),o=Object(n.useState)(),c=Object(i.a)(o,2),l=c[0],s=c[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),f=m[0],v=m[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),h=d[0],b=d[1],_=Object(n.useState)(0),g=Object(i.a)(_,2),O=g[0],E=g[1],y=Object(n.useState)(0),j=Object(i.a)(y,2),N=j[0],M=j[1],x=Object(n.useState)(!1),C=Object(i.a)(x,2),A=C[0],F=C[1],G=function(){s(R)};return Object(n.useEffect)((function(){return a.current=initGame("coronavirusGame",35,0,!1,!1,(function(e){var t=e.time,a=e.points,n=Math.round(3.683*t);E(a),M(n);var r=w.setNewPuntation(n+a);F(r),s(S),v(!0)}),te),function(){a.current.destroy()}}),[]),r.a.createElement("div",{className:ee.a.game},r.a.createElement("div",{className:ee.a.wrapper},r.a.createElement("div",{id:"coronavirusGame"}),f&&r.a.createElement(V,{className:ee.a.modal,state:l,points:O,bonusTime:N,newBest:A,onAccept:function(){a.current.scene.getScenes(!0)[0].scene.restart(),G()},onCancel:function(){G(),b(!0)},onStateChange:function(e){switch(e){case P:return v(!1),void(h&&t(ne.home))}}})))})),ne=(a(363),{home:1,game:2});var re=r.a.memo((function(){var e=Object(n.useState)(ne.home),t=Object(i.a)(e,2),a=t[0],o={setScreenActive:t[1]};switch(a){case ne.home:return r.a.createElement(X,o);case ne.game:return r.a.createElement(ae,o);default:return r.a.createElement(X,o)}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports={game:"Game_game__1oenb",wrapper:"Game_wrapper__2JG6h",modal:"Game_modal__3yiNf",chartWrapper:"Game_chartWrapper__2xDFN"}},79:function(e,t,a){e.exports={button:"Button_button__2cZ5P",primary:"Button_primary__1pAFz",negative:"Button_negative__nytKD"}},80:function(e,t,a){e.exports={modal:"Modal_modal__2J34Z","modal--waiting-to-enter":"Modal_modal--waiting-to-enter__3CFSj",enter:"Modal_enter__12j6C","modal--entering":"Modal_modal--entering__3hm3E",entering:"Modal_entering__tp7ZH","modal--entered":"Modal_modal--entered__1ii0l","modal--leaving":"Modal_modal--leaving__1uQDl",leaving:"Modal_leaving__VWOLZ","modal--left":"Modal_modal--left__2nfQf"}},9:function(e,t,a){e.exports={wrapper:"ModalGameOver_wrapper__3O8rr",wrapperPoints:"ModalGameOver_wrapperPoints__27hwd",title:"ModalGameOver_title__1yMxF",text:"ModalGameOver_text__1zGXq",points:"ModalGameOver_points__1mH6S",bonusPoints:"ModalGameOver_bonusPoints__3eRhj",buttons:"ModalGameOver_buttons__38fgF",button:"ModalGameOver_button__2CpMe",animation:"ModalGameOver_animation__ZGN6t",icon:"ModalGameOver_icon__v1ebu"}}},[[175,1,2]]]);
//# sourceMappingURL=main.57eb8ded.chunk.js.map