(this["webpackJsonpcoronavirus-game-react"]=this["webpackJsonpcoronavirus-game-react"]||[]).push([[0],{175:function(e,t,a){e.exports=a(364)},180:function(e,t,a){},19:function(e,t,a){e.exports={home:"Home_home__3ydw8",wrapper:"Home_wrapper__22QFl",coronaTime:"Home_coronaTime__3FRKr",icon:"Home_icon___HGqo",button:"Home_button__3K5lt",bestPoints:"Home_bestPoints__1fIWt"}},363:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(50),c=a.n(o),i=(a(180),a(8)),s=a(53),l=a(4),u=a.n(l),m=a(79),f=a.n(m);var p=r.a.memo((function(e){var t=e.children,a=e.className,n=e.variant,o=Object(s.a)(e,["children","className","variant"]);return(r.a.createElement("button",Object.assign({className:u()(a,f.a.button,f.a[n])},o),t))})),v=a(19),d=a.n(v);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _=r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),r.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),O=function(e){var t=e.svgRef,a=e.title,n=h(e,["svgRef","title"]);return r.a.createElement("svg",b({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,_)},g=r.a.forwardRef((function(e,t){return r.a.createElement(O,b({svgRef:t},e))})),E=(a.p,a(133)),w=a(134),j=new(function(){function e(){Object(E.a)(this,e);var t=localStorage.getItem("history");this.history=t?JSON.parse(t):[]}return Object(w.a)(e,[{key:"setNewPuntation",value:function(e){var t={points:e,date:Date.now()};if(!this.history.length)return this.history.push(t),this.saveInLocalStorage(),!0;var a=this.history.findIndex((function(t){return e>t.points}));return a>-1?this.history.splice(a,0,t):this.history.push(t),this.history.length>10&&this.history.pop(),this.saveInLocalStorage(),0===a}},{key:"saveInLocalStorage",value:function(){localStorage.setItem("history",JSON.stringify(this.history))}},{key:"getBestScore",value:function(){return this.history[0]}}]),e}()),y=a(135),N=a(136),S=a.n(N),R=1,M=2,P=3,C=4,x=5,A=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=A;var G=function(e){var t=e.onStateChange,a=e.state,r=e.metadata,o=e.styles,c=e.classPrefix,s=Object(n.useRef)(),l=Object(n.useState)(a||R),u=Object(i.a)(l,2),m=u[0],f=u[1];Object(n.useEffect)((function(){f(a||R)}),[a]);var p=Object(n.useCallback)((function(e){return A((function(){return function(e){if(s.current===e.target){var a=function(e){return M===e?(f(P),P):C===e?(f(x),x):void 0}(m);t&&t({event:e,state:a,metadata:r})}}(e)}))}),[m,t,r]);Object(n.useEffect)((function(){s.current.addEventListener("animationend",p);var e=s.current;return function(){return e.removeEventListener("animationend",p)}}),[s,p]);var v=Object(n.useCallback)((function(){return o&&T({state:a,styles:o,classPrefix:c})}),[a,o,c])();return[s,v,m]},T=function(e){var t=e.state,a=e.styles,n=e.classPrefix;if(a){var r=n;switch(r||(r="spark-animation"),t){case R:return a["".concat(r,"--waiting-to-enter")];case M:return a["".concat(r,"--entering")];case P:return a["".concat(r,"--entered")];case C:return a["".concat(r,"--leaving")];case x:return a["".concat(r,"--left")];default:return r}}else console.error("[mapStateWithClassCSSModule] you should pass an css module styles object")},F=a(80),k=a.n(F);var I=r.a.memo((function(e){var t=e.className,a=e.state,o=e.onStateChange,c=e.children,s=G({state:a,styles:k.a,classPrefix:"modal"}),l=Object(i.a)(s,3),m=l[0],f=l[1],p=l[2];return Object(n.useEffect)((function(){o&&o(p)}),[p,o]),r.a.createElement("div",{ref:m,className:u()(t,k.a.modal,f)},c)}));function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var L=r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),r.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M10.79 16.29c.39.39 1.02.39 1.41 0l3.59-3.59c.39-.39.39-1.02 0-1.41L12.2 7.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L12.67 11H4c-.55 0-1 .45-1 1s.45 1 1 1h8.67l-1.88 1.88c-.39.39-.38 1.03 0 1.41zM19 3H5c-1.11 0-2 .9-2 2v3c0 .55.45 1 1 1s1-.45 1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),W=function(e){var t=e.svgRef,a=e.title,n=H(e,["svgRef","title"]);return r.a.createElement("svg",B({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,L)},z=r.a.forwardRef((function(e,t){return r.a.createElement(W,B({svgRef:t},e))}));a.p;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var U=r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{d:"M0 0L24 0 24 24 0 24z"}),r.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M6 5.215v12.57c0 .958 1.03 1.54 1.822 1.02l9.628-6.286c.733-.473.733-1.565 0-2.05L7.822 4.196C7.029 3.674 6 4.256 6 5.215z"})),q=function(e){var t=e.svgRef,a=e.title,n=J(e,["svgRef","title"]);return r.a.createElement("svg",D({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,U)},Z=r.a.forwardRef((function(e,t){return r.a.createElement(q,D({svgRef:t},e))})),K=(a.p,a(7)),V=a.n(K);var Q=r.a.memo((function(e){var t=e.state,a=e.newBest,o=e.points,c=e.bonusTime,l=e.onAccept,m=e.onCancel,f=Object(s.a)(e,["state","newBest","points","bonusTime","onAccept","onCancel"]),v=Object(n.useRef)(),d=Object(n.useRef)(),b=Object(n.useState)(!1),h=Object(i.a)(b,2),_=h[0],O=h[1],g=Object(n.useState)(!1),E=Object(i.a)(g,2),w=E[0],N=E[1],R=Object(n.useState)(!1),M=Object(i.a)(R,2),P=M[0],C=M[1],x=Object(n.useState)(!1),A=Object(i.a)(x,2),G=A[0],T=A[1],F=j.getBestScore();F=F&&F.points||0;var k=Object(y.useCountUp)({end:c,delay:3.5,duration:2}).countUp;return Object(n.useEffect)((function(){setTimeout((function(){N(!0)}),1500),a?(d.current=S.a.loadAnimation({container:v.current,renderer:"svg",loop:!1,autoplay:!1,path:"https://assets7.lottiefiles.com/packages/lf20_aEFaHc.json"}),setTimeout((function(){d.current.goToAndPlay(0),N(!1),O(!0),setTimeout((function(){T(!0)}),2e3)}),6500)):setTimeout((function(){N(!1),C(!0),T(!0)}),6500)}),[]),r.a.createElement(I,Object.assign({state:t},f),r.a.createElement("div",{className:V.a.wrapper},r.a.createElement("h1",{className:V.a.title},"\xa1SE ACAB\xd3!"),r.a.createElement("div",{className:V.a.wrapperPoints},r.a.createElement("div",{className:V.a.wrapperRecord},r.a.createElement("p",{className:V.a.text},"Puntuaci\xf3n"),r.a.createElement("p",{className:V.a.points},o+Number(k)," pts")),r.a.createElement("div",{className:u()(V.a.bonusTimeWrapper,w&&V.a.show)},r.a.createElement("p",{className:V.a.text},"Bonus de tiempo"),r.a.createElement("p",{className:V.a.bonusPoints},"+ ",c-Number(k))),r.a.createElement("div",{className:u()(V.a.bonusTimeWrapper,P&&V.a.show)},r.a.createElement("p",{className:V.a.text},"Tu mejor puntuaci\xf3n"),r.a.createElement("p",{className:V.a.bonusPoints},F)),r.a.createElement("div",{className:u()(V.a.bonusTimeWrapper,_&&V.a.show)},r.a.createElement("p",{className:V.a.bonusPoints},"\xa1NUEVO RECORD!"))),r.a.createElement("div",{className:u()(V.a.buttons,G&&V.a.show)},r.a.createElement(p,{className:V.a.button,variant:"primary",onClick:function(){l&&l()}},r.a.createElement(Z,{className:V.a.icon}),"REINTENTAR"),r.a.createElement(p,{className:V.a.button,variant:"negative",onClick:function(){m&&m()}},r.a.createElement(z,{className:V.a.icon}),"SALIR")),r.a.createElement("div",{className:V.a.animation,ref:v})))}));var X=r.a.memo((function(e){var t=e.setScreenActive,a=j.getBestScore();return a=a&&a.points||0,r.a.createElement("div",{className:d.a.home},r.a.createElement("div",{className:d.a.wrapper},r.a.createElement("h1",{className:d.a.coronaTime},"CORONA-TIME"),r.a.createElement("div",{className:d.a.bestPoints},r.a.createElement("p",null,"MEJOR PUNTUACI\xd3N"),r.a.createElement("h2",null,a," pts")),r.a.createElement(p,{className:d.a.button,variant:"primary",onClick:function(){t(ne.game)}},r.a.createElement(g,{className:d.a.icon}),"JUGAR AHORA"),r.a.createElement(p,{className:d.a.button,onClick:function(){return alert("Esto est\xe1 WIP, ;)")}},"\xbfC\xd3MO FUNCIONA?")))})),Y=a(33);r.a.memo((function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){globalCollectData.onChangeData((function(e){var t=function(e){var t=[];return Object.values(e).forEach((function(e){var a=t.length-1;a>-1&&t[a].gameTime===e.gameTime?(t.pop(),t.push(e)):t.push(e)})),t}(e);o(t)}))}),[]),r.a.createElement(Y.c,null,r.a.createElement(Y.b,{height:250,data:a},r.a.createElement(Y.d,{name:"time",dataKey:"gameTime",type:"number",domain:[0,40],allowDecimals:!1}),r.a.createElement(Y.e,{domain:[0,40]}),r.a.createElement(Y.a,{type:"monotone",dataKey:"infected",stackId:"1",stroke:"#8884d8",fill:"#8884d8",isAnimationActive:!1})))}));var $=a(55),ee=a.n($),te={width:1e3,height:600};var ae=r.a.memo((function(e){var t=e.setScreenActive,a=Object(n.useRef)(),o=Object(n.useState)(),c=Object(i.a)(o,2),s=c[0],l=c[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),f=m[0],p=m[1],v=Object(n.useState)(!1),d=Object(i.a)(v,2),b=d[0],h=d[1],_=Object(n.useState)(0),O=Object(i.a)(_,2),g=O[0],E=O[1],w=Object(n.useState)(0),y=Object(i.a)(w,2),N=y[0],S=y[1],R=Object(n.useState)(!1),P=Object(i.a)(R,2),A=P[0],G=P[1],T=function(){l(C)};return Object(n.useEffect)((function(){return a.current=initGame("coronavirusGame",35,0,!1,!1,(function(e){var t=e.time,a=e.points,n=Math.round(3.683*t);E(a),S(n);var r=j.setNewPuntation(n+a);G(r),l(M),p(!0)}),te),function(){a.current.destroy()}}),[]),r.a.createElement("div",{className:ee.a.game},r.a.createElement("div",{className:ee.a.wrapper},r.a.createElement("div",{id:"coronavirusGame"}),f&&r.a.createElement(Q,{className:ee.a.modal,state:s,points:g,bonusTime:N,newBest:A,onAccept:function(){a.current.scene.getScenes(!0)[0].scene.restart(),T()},onCancel:function(){T(),h(!0)},onStateChange:function(e){switch(e){case x:return p(!1),void(b&&t(ne.home))}}})))})),ne=(a(363),{home:1,game:2});var re=r.a.memo((function(){var e=Object(n.useState)(ne.home),t=Object(i.a)(e,2),a=t[0],o={setScreenActive:t[1]};switch(a){case ne.home:return r.a.createElement(X,o);case ne.game:return r.a.createElement(ae,o);default:return r.a.createElement(X,o)}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,a){e.exports={game:"Game_game__1oenb",wrapper:"Game_wrapper__2JG6h",modal:"Game_modal__3yiNf",chartWrapper:"Game_chartWrapper__2xDFN"}},7:function(e,t,a){e.exports={wrapper:"ModalGameOver_wrapper__3O8rr",wrapperPoints:"ModalGameOver_wrapperPoints__27hwd",title:"ModalGameOver_title__1yMxF",text:"ModalGameOver_text__1zGXq",points:"ModalGameOver_points__1mH6S",bonusPoints:"ModalGameOver_bonusPoints__3eRhj",buttons:"ModalGameOver_buttons__38fgF",show:"ModalGameOver_show__-mwWY",button:"ModalGameOver_button__2CpMe",animation:"ModalGameOver_animation__ZGN6t",icon:"ModalGameOver_icon__v1ebu",wrapperRecord:"ModalGameOver_wrapperRecord__1yUCO",bonusTimeWrapper:"ModalGameOver_bonusTimeWrapper__tjmyZ"}},79:function(e,t,a){e.exports={button:"Button_button__2cZ5P",primary:"Button_primary__1pAFz",negative:"Button_negative__nytKD"}},80:function(e,t,a){e.exports={modal:"Modal_modal__2J34Z","modal--waiting-to-enter":"Modal_modal--waiting-to-enter__3CFSj",enter:"Modal_enter__12j6C","modal--entering":"Modal_modal--entering__3hm3E",entering:"Modal_entering__tp7ZH","modal--entered":"Modal_modal--entered__1ii0l","modal--leaving":"Modal_modal--leaving__1uQDl",leaving:"Modal_leaving__VWOLZ","modal--left":"Modal_modal--left__2nfQf"}}},[[175,1,2]]]);
//# sourceMappingURL=main.2011c73d.chunk.js.map