(this["webpackJsonpcoronavirus-game-react"]=this["webpackJsonpcoronavirus-game-react"]||[]).push([[0],{174:function(e,t,a){e.exports=a(364)},179:function(e,t,a){},180:function(e,t,a){e.exports={chartWrapper:"Home_chartWrapper__1VYsj"}},363:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(49),c=a.n(o),s=(a(179),a(7)),i=a(52),l=a(4),u=a.n(l),m=a(78),d=a.n(m);var f=r.a.memo((function(e){var t=e.children,a=e.className,n=e.variant,o=Object(i.a)(e,["children","className","variant"]);return(r.a.createElement("button",Object.assign({className:u()(a,d.a.button,d.a[n])},o),t))})),v=(a(180),a(132)),p=1,_=2,h=3,b=4,g=5,O=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=O;var j=function(e){var t=e.onStateChange,a=e.state,r=e.metadata,o=e.styles,c=e.classPrefix,i=Object(n.useRef)(),l=Object(n.useState)(a||p),u=Object(s.a)(l,2),m=u[0],d=u[1];Object(n.useEffect)((function(){d(a||p)}),[a]);var f=Object(n.useCallback)((function(e){return O((function(){return function(e){if(i.current===e.target){var a=function(e){return _===e?(d(h),h):b===e?(d(g),g):void 0}(m);t&&t({event:e,state:a,metadata:r})}}(e)}))}),[m,t,r]);Object(n.useEffect)((function(){i.current.addEventListener("animationend",f);var e=i.current;return function(){return e.removeEventListener("animationend",f)}}),[i,f]);var v=Object(n.useCallback)((function(){return o&&E({state:a,styles:o,classPrefix:c})}),[a,o,c])();return[i,v,m]},E=function(e){var t=e.state,a=e.styles,n=e.classPrefix;if(a){var r=n;switch(r||(r="spark-animation"),t){case p:return a["".concat(r,"--waiting-to-enter")];case _:return a["".concat(r,"--entering")];case h:return a["".concat(r,"--entered")];case b:return a["".concat(r,"--leaving")];case g:return a["".concat(r,"--left")];default:return r}}else console.error("[mapStateWithClassCSSModule] you should pass an css module styles object")},w=a(79),y=a.n(w);var N=r.a.memo((function(e){var t=e.className,a=e.state,o=e.onStateChange,c=e.children,i=j({state:a,styles:y.a,classPrefix:"modal"}),l=Object(s.a)(i,3),m=l[0],d=l[1],f=l[2];return Object(n.useEffect)((function(){o&&o(f)}),[f,o]),r.a.createElement("div",{ref:m,className:u()(t,y.a.modal,d)},c)})),S=a(9),M=a.n(S),A=a(133),C=a.n(A);var G=r.a.memo((function(e){var t=e.state,a=e.newBest,o=e.points,c=e.bonusTime,l=e.onAccept,u=e.onCancel,m=Object(i.a)(e,["state","newBest","points","bonusTime","onAccept","onCancel"]),d=Object(n.useRef)(),p=Object(n.useRef)(),_=Object(n.useState)(!1),h=Object(s.a)(_,2),b=h[0],g=h[1],O=Object(v.useCountUp)({end:c,delay:1,duration:5}).countUp;return Object(n.useEffect)((function(){a&&(p.current=C.a.loadAnimation({container:d.current,renderer:"svg",loop:!1,autoplay:!1,path:"https://assets7.lottiefiles.com/packages/lf20_aEFaHc.json"}),setTimeout((function(){p.current.goToAndPlay(0),g(!0)}),4e3))}),[]),r.a.createElement(N,Object.assign({state:t},m),r.a.createElement("div",{className:M.a.wrapper},r.a.createElement("h1",{className:M.a.title},"\xa1SE ACAB\xd3!"),r.a.createElement("div",{className:M.a.wrapperPoints},b?r.a.createElement("p",{className:M.a.text},"\xa1Nuevo record personal!"):r.a.createElement("p",{className:M.a.text},"Tu puntuaci\xf3n"),r.a.createElement("p",{className:M.a.points},o+Number(O)," pts"),r.a.createElement("p",{className:M.a.text},"Bonus de tiempo"),r.a.createElement("p",{className:M.a.bonusPoints},"+ ",c-Number(O))),r.a.createElement("div",{className:M.a.buttons},r.a.createElement(f,{className:M.a.button,onClick:function(){l&&l()}},"REINTENTAR"),r.a.createElement(f,{className:M.a.button,variant:"negative",onClick:function(){u&&u()}},"SALIR")),r.a.createElement("div",{className:M.a.animation,ref:d})))}));var x=r.a.memo((function(e){var t=e.setScreenActive;return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement(f,{onClick:function(){t(W.game)}},"PLAY"))})),k=a(134),P=a(135),R=new(function(){function e(){Object(k.a)(this,e);var t=localStorage.getItem("history");this.history=t?JSON.parse(t):[]}return Object(P.a)(e,[{key:"setNewPuntation",value:function(e){var t={points:e,date:Date.now()};if(!this.history.length)return this.history.push(t),this.saveInLocalStorage(),!0;var a=this.history.findIndex((function(t){return e>t.points}));return a>-1?this.history.splice(a,1,t):this.history.push(t),this.history.length>10&&this.history.pop(),this.saveInLocalStorage(),0===a}},{key:"saveInLocalStorage",value:function(){localStorage.setItem("history",JSON.stringify(this.history))}}]),e}()),T=a(32);r.a.memo((function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){globalCollectData.onChangeData((function(e){var t=function(e){var t=[];return Object.values(e).forEach((function(e){var a=t.length-1;a>-1&&t[a].gameTime===e.gameTime?(t.pop(),t.push(e)):t.push(e)})),t}(e);o(t)}))}),[]),r.a.createElement(T.c,null,r.a.createElement(T.b,{height:250,data:a},r.a.createElement(T.d,{name:"time",dataKey:"gameTime",type:"number",domain:[0,40],allowDecimals:!1}),r.a.createElement(T.e,{domain:[0,40]}),r.a.createElement(T.a,{type:"monotone",dataKey:"infected",stackId:"1",stroke:"#8884d8",fill:"#8884d8",isAnimationActive:!1})))}));var F=a(54),I=a.n(F),B={width:1e3,height:600};var L=r.a.memo((function(e){var t=e.setScreenActive,a=Object(n.useRef)(),o=Object(n.useState)(),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],f=m[1],v=Object(n.useState)(!1),p=Object(s.a)(v,2),h=p[0],O=p[1],j=Object(n.useState)(0),E=Object(s.a)(j,2),w=E[0],y=E[1],N=Object(n.useState)(0),S=Object(s.a)(N,2),M=S[0],A=S[1],C=Object(n.useState)(!1),x=Object(s.a)(C,2),k=x[0],P=x[1],T=function(){l(b)};return Object(n.useEffect)((function(){return a.current=initGame("coronavirusGame",35,0,!1,!0,(function(e){var t=e.time,a=e.points,n=Math.round(3.683*t);y(a),A(n);var r=R.setNewPuntation(n+a);P(r),l(_),f(!0)}),B),function(){a.current.destroy()}}),[]),r.a.createElement("div",{className:I.a.game},r.a.createElement("div",{className:I.a.wrapper},r.a.createElement("div",{id:"coronavirusGame"}),d&&r.a.createElement(G,{className:I.a.modal,state:i,points:w,bonusTime:M,newBest:k,onAccept:function(){a.current.scene.getScenes(!0)[0].scene.restart(),T()},onCancel:function(){T(),O(!0)},onStateChange:function(e){switch(e){case g:return f(!1),void(h&&t(W.home))}}})))})),W=(a(363),{home:1,game:2});var D=r.a.memo((function(){var e=Object(n.useState)(W.home),t=Object(s.a)(e,2),a=t[0],o={setScreenActive:t[1]};switch(a){case W.home:return r.a.createElement(x,o);case W.game:return r.a.createElement(L,o);default:return r.a.createElement(x,o)}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,a){e.exports={game:"Game_game__1oenb",wrapper:"Game_wrapper__2JG6h",modal:"Game_modal__3yiNf",chartWrapper:"Game_chartWrapper__2xDFN"}},78:function(e,t,a){e.exports={button:"Button_button__2cZ5P",negative:"Button_negative__nytKD"}},79:function(e,t,a){e.exports={modal:"Modal_modal__2J34Z","modal--waiting-to-enter":"Modal_modal--waiting-to-enter__3CFSj",enter:"Modal_enter__12j6C","modal--entering":"Modal_modal--entering__3hm3E",entering:"Modal_entering__tp7ZH","modal--entered":"Modal_modal--entered__1ii0l","modal--leaving":"Modal_modal--leaving__1uQDl",leaving:"Modal_leaving__VWOLZ","modal--left":"Modal_modal--left__2nfQf"}},9:function(e,t,a){e.exports={wrapper:"ModalGameOver_wrapper__3O8rr",wrapperPoints:"ModalGameOver_wrapperPoints__27hwd",title:"ModalGameOver_title__1yMxF",text:"ModalGameOver_text__1zGXq",points:"ModalGameOver_points__1mH6S",bonusPoints:"ModalGameOver_bonusPoints__3eRhj",buttons:"ModalGameOver_buttons__38fgF",button:"ModalGameOver_button__2CpMe",animation:"ModalGameOver_animation__ZGN6t"}}},[[174,1,2]]]);
//# sourceMappingURL=main.313be821.chunk.js.map